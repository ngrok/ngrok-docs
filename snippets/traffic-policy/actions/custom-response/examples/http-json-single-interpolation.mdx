### Custom JSON API Response with CEL Interpolation

The following [Traffic Policy](/traffic-policy/)
configuration demonstrates how to use the `custom-response` action to return a
JSON response with CEL Interpolation for the connection start time.

#### Example Traffic Policy Document

<CodeGroup>
```yaml policy.yml {6-12}
on_http_request:
  - expressions:
      - req.url.path == '/api/example'
    actions:
      - type: custom-response
        config:
          body: '{"connection-start":"${conn.ts.start}"}'
          headers:
            content-type: application/json
```

```json policy.json {8-17}
{
  "on_http_request": [
    {
      "expressions": [
        "req.url.path == '/api/example'"
      ],
      "actions": [
        {
          "type": "custom-response",
          "config": {
            "body": "{\"connection-start\":\"${conn.ts.start}\"}",
            "headers": {
              "content-type": "application/json"
            }
          }
        }
      ]
    }
  ]
}
```
</CodeGroup>

#### Example Request

```bash
$ curl https://example.ngrok.app/api/example
```

```http
HTTP/2 200 OK
content-type: application/json

{
  "connection-start": "2024-06-24T15:30:00Z"
}
```

In this example, when a request is made to `/api/example`, ngrok returns a
custom JSON response with the default status code of `200`. The response includes a
`content-type: application/json` header and a JSON body that uses CEL
Interpolation to show the connection start time using the [`conn.ts.start`
variable](/traffic-policy/variables/connection/#conntsstart).
