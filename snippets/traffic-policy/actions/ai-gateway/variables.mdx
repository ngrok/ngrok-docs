import {
	Config,
	ConfigChildren,
	ConfigField,
} from "/snippets/ConfigTable.jsx";

<Config>
	<ConfigField title="actions.ngrok.ai_gateway.status" type="string">
		<p>
			Overall outcome of the action: <code>"success"</code> or <code>"error"</code>.
		</p>
	</ConfigField>
	<ConfigField title="actions.ngrok.ai_gateway.candidates" type="array of objects">
		<p>
			List of all provider/model combinations considered before attempting requests.
		</p>
		<ConfigChildren>
			<ConfigField title="candidates[i].provider" type="string">
				<p>Provider ID (e.g., <code>"openai"</code>, <code>"anthropic"</code>).</p>
			</ConfigField>
			<ConfigField title="candidates[i].model" type="string">
				<p>Model ID (e.g., <code>"gpt-4o"</code>, <code>"claude-3-5-sonnet-20241022"</code>).</p>
			</ConfigField>
		</ConfigChildren>
	</ConfigField>
	<ConfigField title="actions.ngrok.ai_gateway.attempts" type="array of objects">
		<p>
			List of all request attempts made to providers.
		</p>
		<ConfigChildren>
			<ConfigField title="attempts[i].status" type="string">
				<p>Attempt outcome: <code>"success"</code> or <code>"error"</code>.</p>
			</ConfigField>
			<ConfigField title="attempts[i].status_code" type="integer">
				<p>HTTP status code from the provider (0 if no response received).</p>
			</ConfigField>
			<ConfigField title="attempts[i].error" type="string">
				<p>Error message if the attempt failed, null for successful attempts.</p>
			</ConfigField>
			<ConfigField title="attempts[i].provider_id" type="string">
				<p>Provider name for this attempt.</p>
			</ConfigField>
			<ConfigField title="attempts[i].model_id" type="string">
				<p>Model name for this attempt.</p>
			</ConfigField>
			<ConfigField title="attempts[i].api_key_hash" type="string">
				<p>Non-reversible hash of the API key used.</p>
			</ConfigField>
			<ConfigField title="attempts[i].input_tokens_estimated" type="integer">
				<p>Pre-flight estimated input token count.</p>
			</ConfigField>
			<ConfigField title="attempts[i].input_tokens_actual" type="integer">
				<p>Actual input token count from provider response.</p>
			</ConfigField>
			<ConfigField title="attempts[i].output_tokens_estimated" type="integer">
				<p>Estimated output token count.</p>
			</ConfigField>
			<ConfigField title="attempts[i].output_tokens_actual" type="integer">
				<p>Actual output token count from provider response.</p>
			</ConfigField>
			<ConfigField title="attempts[i].tokenizer_encoding" type="string">
				<p>Tokenizer encoding used (e.g., <code>"cl100k_base"</code>, <code>"o200k_base"</code>).</p>
			</ConfigField>
			<ConfigField title="attempts[i].body_on_error" type="string">
				<p>Response body for failed attempts (4xx/5xx), truncated to 1KB.</p>
			</ConfigField>
			<ConfigField title="attempts[i].req" type="object">
				<p>HTTP request details including method, URL, headers, and body.</p>
			</ConfigField>
		</ConfigChildren>
	</ConfigField>
	<ConfigField title="actions.ngrok.ai_gateway.success" type="object">
		<p>
			Details of the successful attempt. Only present when <code>status</code> is <code>"success"</code>.
		</p>
		<ConfigChildren>
			<ConfigField title="success.attempt_index" type="integer">
				<p>Index into <code>attempts[]</code> for the successful attempt.</p>
			</ConfigField>
			<ConfigField title="success.provider_id" type="string">
				<p>Provider that succeeded.</p>
			</ConfigField>
			<ConfigField title="success.model_id" type="string">
				<p>Model that succeeded.</p>
			</ConfigField>
			<ConfigField title="success.api_key_hash" type="string">
				<p>Hash of the API key used for the successful request.</p>
			</ConfigField>
			<ConfigField title="success.input_tokens_estimated" type="integer">
				<p>Estimated input tokens for the successful request.</p>
			</ConfigField>
			<ConfigField title="success.input_tokens_actual" type="integer">
				<p>Actual input tokens from the successful response.</p>
			</ConfigField>
			<ConfigField title="success.output_tokens_estimated" type="integer">
				<p>Estimated output tokens.</p>
			</ConfigField>
			<ConfigField title="success.output_tokens_actual" type="integer">
				<p>Actual output tokens from the successful response.</p>
			</ConfigField>
		</ConfigChildren>
	</ConfigField>
	<ConfigField title="actions.ngrok.ai_gateway.error.code" type="string">
		<p>
			Error code if the action failed (e.g., <code>"ERR_NGROK_3807"</code>).
		</p>
	</ConfigField>
	<ConfigField title="actions.ngrok.ai_gateway.error.message" type="string">
		<p>
			Error message describing the failure.
		</p>
	</ConfigField>
</Config>
