---
description: Authenticate users with Google OAuth
---

# Google OAuth

## Creating a custom Google OAuth application

Step-by-step instructions below follow Google's documentation on [setting up OAuth 2.0](https://support.google.com/cloud/answer/6158849?hl=en) for a web application.

### Build the consent screen

1.  Create or select a project on the [Google Cloud Platform Console](https://console.cloud.google.com).
2.  Navigate to the project's [OAuth consent screen](https://console.developers.google.com/apis/credentials/consent).
3.  Select whether your application is an [internal or external app](https://support.google.com/cloud/answer/6158849?hl=en#public-and-internal).
4.  Fill out the application name and support email.
5.  Add additional scopes required by your application, saving the full scope URI for later.
    - [Possible scope URIs](https://developers.google.com/identity/protocols/oauth2/scopes)
      .
6.  Ensure that the `email` and `profile` scopes are still selected.
7.  Under Authorized domains, add `ngrok.com` and your application homepage domain.
8.  Add links to your application homepage and privacy policy. The final consent screen should resemble: [![](/img/howto/oauth/1-google-consent_screen_complete.png)](/img/howto/oauth/1-google-consent_screen_complete.png)
9.  Save the application.
    - Applications that require verification cannot complete the consent screen and are not supported by ngrok.

### Create credentials for ngrok

1.  Navigate to [Credentials](https://console.cloud.google.com/apis/credentials) for your project.
2.  Select "Create credentials" from the top menu and select "OAuth Client ID".
3.  Choose "Web application" from the list of application types.
4.  Name your secret, then set "Authorized Redirect URIs" to `https://idp.ngrok.com/oauth2/callback`. The final credentials form should resemble: [![](/img/howto/oauth/2-google-create_client_id.png)](/img/howto/oauth/2-google-create_client_id.png)
5.  Securely store the client ID and secret from the final screen: [![](/img/howto/oauth/3-google-client_id_and_secret.png)](/img/howto/oauth/3-google-client_id_and_secret.png)

### Update your endpoint configuration

1.  Return to the ngrok dashboard and create or edit an OAuth endpoint configuration module for your edge.
2.  Choose to use your own application with Google as the provider.
3.  Include the client ID, secret, and scopes configured in your application.
4.  Add the following scopes to your application if they are not already present:
    - `https://www.googleapis.com/auth/userinfo.profile`
    - `https://www.googleapis.com/auth/userinfo.email`

### Additional application setup information

- [Google OAuth 2.0 Web Server](https://developers.google.com/identity/protocols/oauth2/web-server) (prerequisite steps)
- [GCP Help: Setting up OAuth 2.0](https://support.google.com/cloud/answer/6158849?hl=en)
- [Google OAuth 2.0 workflow](https://developers.google.com/identity/protocols/oauth2)
