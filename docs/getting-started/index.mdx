---
title: ngrok Agent CLI Quickstart
pagination_next: universal-gateway/overview
---

import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";
import ConfigExample from "/src/components/ConfigExample.tsx";
import SecureYourApp from "./_secure-your-app.mdx"

ngrok's core functionality is built around [Agent Endpoints](/universal-gateway/agent-endpoints/): ephemeral tunnels for connecting your app, regardless of where it's running, to the ngrok platform.
One of the most common use cases is to put an app running on your local device online—for example, to share a work in progress on the public internet without hosting and publishing it.

The simplest way to accomplish this is to install the [ngrok Agent CLI](/agent/) and use it to create an agent endpoint that forwards traffic to your localhost.
This quickstart walks you through that process, as well as how to implement basic security measures by requiring visitors to log in with a Google account to access your app.

## What you'll need

1. [An ngrok account](https://dashboard.ngrok.com/signup).
1. Your ngrok auth token, which you can find [in the dashboard](https://dashboard.ngrok.com/get-started/your-authtoken).

## 1. Reserve your domain

A new URL is generated for you every time you start an agent endpoint. 
To maintain a consistent URL, you can reserve a free static domain connected to your ngrok account.

To do so, navigate to the dashboard, visit [the **Domains** section](https://dashboard.ngrok.com/domains), and select **+ New Domain**. 
You can choose a free static domain, or you can use a custom domain you already own.
We'll come back to this in a later step.

## 2. Install the ngrok Agent CLI

Run the command that corresponds to your operating system to install the Agent CLI:

<Tabs groupId="os" queryString="os">
<TabItem value="macos" label="Mac OS" default>

```bash
brew install ngrok
```

</TabItem>
<TabItem value="linux" label="Debian Linux">

```bash
curl -sSL https://ngrok-agent.s3.amazonaws.com/ngrok.asc \
  | sudo tee /etc/apt/trusted.gpg.d/ngrok.asc >/dev/null \
  && echo "deb https://ngrok-agent.s3.amazonaws.com buster main" \
  | sudo tee /etc/apt/sources.list.d/ngrok.list \
  && sudo apt update \
  && sudo apt install ngrok
```

</TabItem>
<TabItem value="windows" label="Windows">

```bash
choco install ngrok
```

Run this in an administrator command prompt.

</TabItem>
</Tabs>

Or [download the ngrok agent directly](https://download.ngrok.com) if you can't use one of the options above.

To test that it's been installed correctly, run the following command in your terminal and confirm that ngrok prints its help text.

```bash
ngrok help
```

## 3. Connect your account

Connect your agent to your ngrok account by providing your auth token as shown below—replace `$YOUR_TOKEN` with the string given to you [in the dashboard](https://dashboard.ngrok.com/get-started/your-authtoken).

```bash
ngrok config add-authtoken $YOUR_TOKEN
```

## 4. Start your app or service

Start up the app or service you'd like to put online.
This is the app that your agent endpoint will forward online traffic to.

If you don't have an app to work with, you can create a minimal Node.js app using the following code to set up a basic HTTP server at port `8080`.

```javascript title="service.js"
const http = require('http');

const server = http.createServer((req, res) => {
    res.writeHead(200, { 'Content-Type': 'text/html' });
    const html = `
    <html>
    <head><title>Test Page</title></head>
    <body><h1>Hello from Node.js HTTP Server!</h1></body>
    </html>
    `;
    res.end(html);
});

const port = 8080;
server.listen(port, () => {
    console.log(`Serving custom HTML at http://localhost:${port}`);
});
```

Navigate to the directory where this file is located and run the following command to start the server:

```bash
node service.js
```

## 5. Put your app online

Start the ngrok agent by running the following command—replace `$PORT` with the specific port where your app is running, such as `8080` or `3000`.
The optional `--url` flag connects your app to your reserved domain from step 1—replace `$YOUR_DOMAIN` with this—so it will always appear at this URL when you start up a new agent.

```bash
ngrok http $PORT --url $YOUR_DOMAIN
```

The agent should print a console UI to your terminal to confirm that it's online and forwarding as intended.
Open the forwarding URL in your browser to see your web application, which is now available over HTTPS with a valid certificate that ngrok automatically manages for you.

## 6. Secure your app

ngrok makes it simple to add authentication to your app by implementing a [Traffic Policy](/traffic-policy/).

Create a new file in your project directory called `policy.yml` and add the contents below.
This policy states that whenever an HTTP/S request is made to the public URL, the agent endpoint should redirect the user to Google OAuth for authentication.

```yaml
on_http_request:
  - actions:
      - type: oauth
        config:
          provider: google
```

Terminate the agent endpoint that you started up in step 5, then restart it with the command below (replacing `$PORT` as before) to enact the traffic policy.

```bash
ngrok http $PORT --traffic-policy-file policy.yml
```

Now when you visit your public URL you should be prompted to authenticate by logging in with a Google account before you can access your app.

## What's next?

- If you need to interact with ngrok agent endpoints programmatically, we recommend using one of our Agent SDK packages which are available for [JavaScript (Node.js)](/javascript/), [Go](/go/), [Python](/python/), and [Rust](/javascript/).
- If your use case calls for a centrally managed, always-on endpoint that isn't tied to the ephemeral lifetime of an agent endpoint, you should proceed to [getting started with Cloud Endpoints](/cloud-endpoints/).
- This quickstart only barely scratches the surface of what's possible with a traffic policy—check out the [Actions overview](/traffic-policy/actions/) to see what else you can do.
- Visit the [Agent CLI command reference](/agent/cli/) for a complete list of available commands.