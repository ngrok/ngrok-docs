---
sidebar_label: Python
title: ngrok-python Quickstart
pagination_next: universal-gateway/overview
---

import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";
import ConfigExample from "/src/components/ConfigExample.tsx";
import SecureYourApp from "./_secure-your-app.mdx"

It enables you to quickly and efficiently serve Python applications on the internet without the need to configure low-level network primitives like IPs, certificates, load balancers, or ports.

This quickstart uses the ngrok-python [Agent SDK](/agent-sdks/) to put a Python app on the internet and secure it so only you can access it.

## What you'll need

1. [An ngrok account](https://dashboard.ngrok.com/signup).
1. Your ngrok authtoken, which you can find [in the dashboard](https://dashboard.ngrok.com/get-started/your-authtoken).
1. [Python installed](https://www.python.org/downloads/) on your machine. You can check this by running `python -v` in your terminal.
1. A domain connected to your ngrok account. We'll refer to this as `$YOUR_DOMAIN` from here on out.

### Get your domain

In the dashboard, visit [the **Domains** section](https://dashboard.ngrok.com/domains) and select **+ New Domain** to get started. ngrok offers free static domains, or you can [bring your own custom domain](/docs/universal-gateway/custom-domains/).

## 1. Install the Python SDK`

Create a new Python module and install ngrok-python.

```bash
pip install ngrok
```

## 2. Export your auth token to your environment

Export your [ngrok authtoken](https://dashboard.ngrok.com/get-started/your-authtoken) as an environment variable in the terminal. 
If you're running your service already, make sure you open a new terminal window or tab to run the following commands.

<Tabs groupId="os" queryString="os">
<TabItem value="macos" label="Mac OS" default>

First, in the terminal run:

```bash
touch ~/.zshrc
```

Then add the following line to your `~/.zshrc` file:

```bash
export NGROK_AUTHTOKEN = $YOUR_AUTHTOKEN
```

Save the file and run the following command to apply the changes:

```bash
source ~/.zshrc
```

</TabItem>
<TabItem value="linux" label="Debian Linux">

First, in the terminal run:

```bash
touch ~/.bashrc
```

Then add the following line to your `~/.bashrc` file:

```bash
export NGROK_AUTHTOKEN = $YOUR_AUTHTOKEN
```

Save the file and run the following command to apply the changes:

```bash
source ~/.bashrc
```

</TabItem>
<TabItem value="windows" label="Windows">

In PowerShell, run the following command to set your authtoken as an environment variable:

```bash
$env:NGROK_AUTHTOKEN = "$YOUR_AUTHTOKEN"
```

</TabItem>
</Tabs>

## 3. Start your service

Before you start an endpoint, you need something for the endpoint to forward traffic to. If you already have a local app or service that you want to send traffic to, you should use that. Otherwise, you can create a Python file with the following code to set up a basic HTTP server at port `8080`.

```python filename="service.py"
from http.server import BaseHTTPRequestHandler, HTTPServer

class MyHandler(BaseHTTPRequestHandler):
    def do_GET(self):
        self.send_response(200)
        self.send_header("Content-type", "text/html")
        self.end_headers()
        html = b"""
        <html>
        <head><title>Test Page</title></head>
        <body><h1>Hello from Python HTTP Server!</h1></body>
        </html>
        """
        self.wfile.write(html)

def run(server_class=HTTPServer, handler_class=MyHandler, port=8080):
    server_address = ('', port)
    httpd = server_class(server_address, handler_class)
    print(f"Serving custom HTML at http://localhost:{port}")
    httpd.serve_forever()

if __name__ == "__main__":
    run()
```

You can run this code by opening a terminal in the same directory as the file and running:

```bash
python service.py
```

## 4. Start your endpoint

First:

1. Create a new directory for the app that you'll start your endpoint from.
1. Navigate to it.
1. Create a new Python file there.

```bash
mkdir hello-ngrok && cd hello-ngrok
touch example.py
```

Then add the following code to your file. This example:

1. Starts an Agent endpoint that points to your service running on port `8080`.
1. Secures the endpoint with a traffic policy that requires authentication via Google OAuth.

:::note
This example uses ngrok's default Google OAuth application. To use your own, see [the OAuth Traffic Policy Action documentation](/docs/traffic-policy/actions/oauth/#google-example).
:::

```python filename="example.py"
import ngrok
import time

# Establish connectivity
listener = ngrok.forward(
  8080, # Port your service is running on
  authtoken_from_env=True,
	# Secure your endpoint with a traffic policy.
	# This could also be a path to a traffic policy file.
  traffic_policy='{"on_http_request": [{"actions": [{"type": "oauth","config": {"provider": "google"}}]}]}'
)

# Output ngrok url to console
print(f"Ingress established at {listener.url()}")

# Keep the listener alive
try:
while True:
    time.sleep(1)
except KeyboardInterrupt:
    print("Closing listener")
```

## 5. Test your endpoint

Run your app with the following command:

```bash
python example.py
```

Assuming everything is set up correctly, this should print your endpoint URL to the terminal. 
Your app is now live on the internet at this URL, and you can access it from any browser or tool that can make HTTP requests.

When you visit the URL, you should be prompted to log in with Google. After logging in, you will either see your app or service, or, if you used the example app in this quickstart, you'll see "Hello from Python HTTP Server!" displayed in your browser.

## What's next?

- Traffic policy enables you to [send custom headers](/traffic-policy/actions/add-headers/#examples), [terminate TLS](/traffic-policy/actions/terminate-tls/#examples), [rewrite URLs](/traffic-policy/actions/url-rewrite/#examples), and more. Learn how to [secure your app with traffic policy](/docs/traffic-policy/).
- Read [the full Python SDK documentation](https://ngrok.github.io/ngrok-python/) for more code examples.
- Explore [Cloud Endpoints](/universal-gateway/cloud-endpoints/quickstart/), which enable you to manage traffic for multiple endpoints centrally in the cloud.
