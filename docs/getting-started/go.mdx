---
sidebar_label: Go
title: ngrok-go Quickstart
pagination_next: universal-gateway/overview
---

import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";
import ConfigExample from "/src/components/ConfigExample.tsx";
import SecureYourApp from "./_secure-your-app.mdx"

[The ngrok Go SDK](https://pkg.go.dev/golang.ngrok.com/ngrok) enables you to quickly and efficiently serve Go applications on the internet without the need to configure low-level network primitives like IPs, certificates, load balancers, or ports.

This quickstart uses ngrok's Go SDK to put a Go app running on your local device online and secure it by requiring visitors to log in with a Google account to access it.

## What you'll need

1. [An ngrok account](https://dashboard.ngrok.com/signup).
1. Your ngrok auth token, which you can find [in the dashboard](https://dashboard.ngrok.com/get-started/your-authtoken).
1. [Go installed](https://go.dev/doc/install) on your machine. You can check this by running `go version` in your terminal.
1. A domain connected to your ngrok account. We'll refer to this as `your-reserved-domain` from here on out.
   - In the dashboard, visit [the **Domains** section](https://dashboard.ngrok.com/domains) and select **+ New Domain** to get started. ngrok offers free static domains, or you can [bring your own custom domain](/docs/universal-gateway/custom-domains/).

## 1. Start your app or service

Start up the app or service you'd like to put online.
This is the app that your agent endpoint will forward online traffic to.

If you don't have an app to work with, you can create a minimal a Python app using the following code to set up a basic HTTP server at port `8080`.

```go filename="service.go"
package main

import (
	"fmt"
	"net/http"
)

func handler(w http.ResponseWriter, r *http.Request) {
	fmt.Fprintf(w, "Hello, world!")
}

func main() {
	http.HandleFunc("/", handler)

	fmt.Println("Starting server at http://localhost:8080")
	err := http.ListenAndServe(":8080", nil)
	if err != nil {
		fmt.Println("Server failed:", err)
	}
}
```

Navigate to the directory where this file is located and run the following command to start the server:

```bash
go run service.go
```

## 2. Install the Go SDK

Create a new Go module and use the following terminal command to install the Go SDK.

:::note
If your terminal is already running an app or service, you'll need to open a new terminal window or tab to follow this step.
:::



## 3. Run the example

1. If you haven't yet, [copy your authtoken from the ngrok dashboard](https://dashboard.ngrok.com/get-started/your-authtoken).
1. Run your application with your authtoken in the environment:

```bash
NGROK_AUTHTOKEN="<TOKEN>" go run main.go
```

Your Go application should be live on the internet, with a URL that anyone on the internet can access.

Your app's randomly-assigned URL will be available in the terminal. When you visit the URL, you should see "Hello from ngrok-go!" in your browser. Try sending it to a friend.

## Secure your app

Once you've completed the quickstart, you can explore other features of ngrok with ngrok-go, such as Requiring authentication to access your app. You may not want everyone to be able to access your application. ngrok can
quickly add authentication to your app with a few lines of code.

The following example only grants access to users whose email address is `alan@example.com`.

You can also add authentication directly in your code.

The following example:

1. Requires visitors to authenticate with Google before they access your application. You can [choose other providers](/traffic-policy/actions/oauth/#supported-providers).
1. Only allows `alan@example.com` access to the application
1. Prints the authenticated user's email address from a request header.

```go
package main

import (
	"context"
	"fmt"
	"log"
	"net/http"

	"golang.ngrok.com/ngrok/v2"
)

func main() {
	if err := run(context.Background()); err != nil {
		log.Fatal(err)
	}
}

const trafficPolicy = `
on_http_request:
  - name: OAuth
    actions:
      - type: oauth
        config:
          auth_id: oauth
          provider: google
  - name: bad email
    expressions:
      - actions.ngrok.oauth.identity.email != 'alan@example.com'
    actions:
      - type: custom-response
        config:
          body: Access denied: ${actions.ngrok.oauth.identity.name}!
          status_code: 403
`

func run(ctx context.Context) error {
	// Create an HTTP listener with the traffic policy
	ln, err := ngrok.Listen(ctx,
		ngrok.WithTrafficPolicy(trafficPolicy),
		ngrok.WithDescription("traffic policy example"),
	)
	if err != nil {
		return err
	}
	// Serve HTTP traffic on the ngrok endpoint
	log.Println("Endpoint online", ln.URL())
	return http.Serve(ln, http.HandlerFunc(handler))
}

func handler(w http.ResponseWriter, r *http.Request) {
	fmt.Fprintf(w, "Hello, %s\n", r.Header.Get("authenticated-user"))
}
```

Run your app again and visit the URL it prints in the terminal.

Anyone accessing your app will be prompted to log in with Google and only your
account will be allowed to access it. Keep in mind that when you restarted
ngrok, your app's URL changed, so make sure to visit the new one.

## Next Steps

- Read the [ngrok-go package documentation](https://pkg.go.dev/golang.ngrok.com/ngrok/v2)
- Star the [ngrok-go GitHub repo](https://github.com/ngrok/ngrok-go) and follow
  it for updates.
- Browse [Go examples of HTTP Endpoints](/universal-gateway/http/?cty=go-sdk) of other ways ngrok can augment your application.
- Bring your own [custom domain to ngrok](/universal-gateway/http/#bring-your-own-domain)
- Create connectivity for non-HTTP protocols such as SSH, RDP, or game servers using [TCP Endpoints](/universal-gateway/tcp/?cty=go-sdk)
- For working with [the ngrok API](https://ngrok.com/docs/api/), check out the [ngrok Go API Client Library](https://github.com/ngrok/ngrok-api-go)
