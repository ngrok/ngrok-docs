---
hide_table_of_contents: true
displayed_sidebar: docs
---

import ErrorDetails from "/src/components/ErrorDetails";

# ERR_NGROK_3004

### Message

ngrok gateway error
The server returned an invalid or incomplete HTTP response.

<ErrorDetails error="err_ngrok_3004" />

## **Solution**
When starting ngrok, use the full upstream service address, including `https://`.  

### **For HTTPS APIs**
If your API is running on `https://localhost:[PORT]`, use:
```sh
ngrok http https://localhost:[PORT] --host-header=localhost
```

### **For HTTP APIs**
If your API is running on `http://localhost:[PORT]`, use:
```sh
ngrok http [PORT] --host-header=localhost
```

### Further help

If you're having trouble resolving this error, please reach out to [support@ngrok.com](mailto:support@ngrok.com?subject=Help%20with%20ERR_NGROK_3004)
