import { ExampleHTTP } from "/examples/actions/url-rewrite.mdx";
import NamedVariblesTemplates from "./_named-variables.mdx";

# URL Rewrite

## Overview

The URL Rewrite action allows you to transform the URL path and query parameters of the incoming request.

## Example

Use this action config in your [Traffic Policy](/docs/http/traffic-policy/index.mdx)

<ExampleHTTP />

## Behavior

When executed, this action will replace all regex matches with the configured replacement. Before regex replacement, all variables or expressions
will be replaced with their corresponding values. [Cel expressions](https://ngrok.com/docs/http/traffic-policy/expressions) are used for `ngrok`, and [named variables](#named-variables) for `nginx`.

## Reference

### Supported Directions

- Inbound

### Configuration

| Type          |
| ------------- |
| `url-rewrite` |

| Parameter | &nbsp; | Description                                                                                                                                                                                                                    |
| --------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `from`    | string | A regular expression string to match inside of the URL. Also allows for interpolated of [named variables](#named-variables) or [cel expressions](https://ngrok.com/docs/http/traffic-policy/expressions/) depending on format. |
| `to`      | string | A regular expression string to replace the `from` match with. Also contains special [named variables](#named-variables) outside of regular regex.                                                                              |
| `format`  | string | Optional value of `nginx` or `ngrok` (default: `ngrok`). Determines interpolation format in `to`/`from` fields.                                                                                                                |

<NamedVariblesTemplates />
