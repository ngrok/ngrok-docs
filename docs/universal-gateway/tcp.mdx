---
title: TCP Endpoints
---

import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";

import RandomAgentCliExample from "/examples/agent-cli/tcp-random.mdx";
import RandomAgentConfigExample from "/examples/agent-config/tcp-random.mdx";
import RandomGoSdkExample from "/examples/go-sdk/tcp-random.mdx";
import RandomJavascriptSdkExample from "/examples/javascript-sdk/tcp-random.mdx";
import RandomKubernetesExample from "/examples/k8s/tcp-random.mdx";
import RandomPythonSdkExample from "/examples/python-sdk/tcp-random.mdx";
import RandomRustSdkExample from "/examples/rust-sdk/tcp-random.mdx";
import RandomSshExample from "/examples/ssh/tcp-random.mdx";

import FixedAgentCliExample from "/examples/agent-cli/tcp-fixed.mdx";
import FixedAgentConfigExample from "/examples/agent-config/tcp-fixed.mdx";
import FixedGoSdkExample from "/examples/go-sdk/tcp-fixed.mdx";
import FixedJavascriptSdkExample from "/examples/javascript-sdk/tcp-fixed.mdx";
import FixedKubernetesExample from "/examples/k8s/tcp-fixed.mdx";
import FixedPythonSdkExample from "/examples/python-sdk/tcp-fixed.mdx";
import FixedRustSdkExample from "/examples/rust-sdk/tcp-fixed.mdx";
import FixedSshExample from "/examples/ssh/tcp-fixed.mdx";

import NonLocalAgentCliExample from "/examples/agent-cli/tcp-nonlocal.mdx";
import NonLocalAgentConfigExample from "/examples/agent-config/tcp-nonlocal.mdx";
import NonLocalGoSdkExample from "/examples/go-sdk/tcp-nonlocal.mdx";
import NonLocalJavascriptSdkExample from "/examples/javascript-sdk/tcp-nonlocal.mdx";
import NonLocalKubernetesExample from "/examples/k8s/tcp-nonlocal.mdx";
import NonLocalPythonSdkExample from "/examples/python-sdk/tcp-nonlocal.mdx";
import NonLocalRustSdkExample from "/examples/rust-sdk/tcp-nonlocal.mdx";
import NonLocalSshExample from "/examples/ssh/tcp-nonlocal.mdx";

import ProxyProtoAgentCliExample from "/examples/agent-cli/tcp-proxyproto.mdx";
import ProxyProtoAgentConfigExample from "/examples/agent-config/tcp-proxyproto.mdx";
import ProxyProtoGoSdkExample from "/examples/go-sdk/tcp-proxyproto.mdx";
import ProxyProtoJavascriptSdkExample from "/examples/javascript-sdk/tcp-proxyproto.mdx";
import ProxyProtoKubernetesExample from "/examples/k8s/tcp-proxyproto.mdx";
import ProxyProtoPythonSdkExample from "/examples/python-sdk/tcp-proxyproto.mdx";
import ProxyProtoRustSdkExample from "/examples/rust-sdk/tcp-proxyproto.mdx";
import ProxyProtoSshExample from "/examples/ssh/tcp-proxyproto.mdx";

# TCP Endpoints

## Overview

TCP endpoints enable you to deliver any network service with a TCP-based
protocol. They are commonly used to create connectivity for:

- Remote access protocols like SSH, VNC and RDP
- Databases like MySQL, Postgres, MSSQL and SQLite
- IoT protocols like MQTT
- Gaming servers like Minecraft

If you are accepting TLS traffic, you may prefer to create a [TLS Endpoint](/universal-gateway/tls/).

::::info Free Plan Usage
TCP endpoints are only available on a free plan after [adding a valid payment method](https://dashboard.ngrok.com/settings#id-verification) to your account.
::::

## Quickstart

Agent Endpoints are the easiest way to get started with ngrok. An [agent
endpoint](/universal-gateway/cloud-endpoints/) is started by a
[Secure Tunnels](/agent/) agent. The endpoint lives for the lifetime
of the process and forwards traffic to a port or URL of your choosing.

This example creates a TCP endpoint on a randomly-assigned URL - e.g.
`tcp://1.tcp.ngrok.io:12345` and forwards its traffic to a local port.

<Tabs groupId="connectivity" queryString="cty">
	<TabItem value="agent-cli" label="Agent CLI" default>
		<RandomAgentCliExample />
	</TabItem>
	<TabItem value="agent-config" label="Agent Config">
		<RandomAgentConfigExample />
	</TabItem>
	<TabItem value="ssh" label="SSH">
		<RandomSshExample />
	</TabItem>
	<TabItem value="go-sdk" label="Go">
		<RandomGoSdkExample />
	</TabItem>
	<TabItem value="javascript-sdk" label="Javascript">
		<RandomJavascriptSdkExample />
	</TabItem>
	<TabItem value="python-sdk" label="Python">
		<RandomPythonSdkExample />
	</TabItem>
	<TabItem value="rust-sdk" label="Rust">
		<RandomRustSdkExample />
	</TabItem>
	<TabItem value="k8s" label="Kubernetes Controller">
		<RandomKubernetesExample />
	</TabItem>
</Tabs>

## URLs

URLs are validated differently depending on their
[binding](/universal-gateway/endpoints/#binding). Consult the
following documentation for details on valid URLs for TCP endpoints:

- [Public Endpoint URLs](/universal-gateway/public-endpoints/#tcp)
- [Internal Endpoint URLs](/universal-gateway/internal-endpoints/#urls)
- [Kubernetes Endpoint URLs](/universal-gateway/kubernetes-endpoints/#urls)

There is no standard scheme for TCP URLs so ngrok renders them as `tcp://`.

### Static URLs

If you would like a public TCP endpoint to have a static URL, you must first
create a [TCP Address](/universal-gateway/tcp-addresses). When you create a TCP
address, a random hostname and port will be assigned to you, e.g.
`1.tcp.ngrok.io:12345`.

A TCP address is only needed to make a public TCP endpoint have a static URL.
They are not needed for TCP endpoints on other bindings, like `internal` or
`kubernetes`.

After you have created a TCP Address, specify the address (e.g.
`1.tcp.eu.ngrok.io:12345`) in the URL when you create the endpoint.

<Tabs groupId="connectivity" queryString="cty">
	<TabItem value="agent-cli" label="Agent CLI" default>
		<FixedAgentCliExample />
	</TabItem>
	<TabItem value="agent-config" label="Agent Config">
		<FixedAgentConfigExample />
	</TabItem>
	<TabItem value="ssh" label="SSH">
		<FixedSshExample />
	</TabItem>
	<TabItem value="go-sdk" label="Go">
		<FixedGoSdkExample />
	</TabItem>
	<TabItem value="javascript-sdk" label="Javascript">
		<FixedJavascriptSdkExample />
	</TabItem>
	<TabItem value="python-sdk" label="Python">
		<FixedPythonSdkExample />
	</TabItem>
	<TabItem value="rust-sdk" label="Rust">
		<FixedRustSdkExample />
	</TabItem>
	<TabItem value="k8s" label="Kubernetes Controller">
		<FixedKubernetesExample />
	</TabItem>
</Tabs>

### Custom domains

Public TCP endpoints are assigned randomly on an ngrok-controlled hostname with
a randomly-assigned port. You may not choose the hostname and you may not
select the port.

You may, however, simulate a customized hostname by creating a CNAME record to
the hostname of your assigned TCP address. If you do so, be aware that all
ports on that hostname, even those provisioned to other accounts will then be
available on your domain.

For example if your TCP address is `5.tcp.ngrok.io:12345`, you could create the
following CNAME record:

```
CNAME tcp.mydomain.com -> 5.tcp.ngrok.io
```

And then you can access that TCP endpoint with

```
telnet tcp.mydomain.com 12345
```

## Traffic Policy

Attach [Traffic Policy](/traffic-policy/) to endpoints to route, authenticate
and transform the traffic through the endpoint.

### Authentication

When you create public TCP endpoints, you often want to secure them with
authentication. You can secure your TCP endpoints with the following [Traffic
Policy](/traffic-policy/) actions. There is a limited set of actions available
to authenticate TCP traffic because the TCP protocol is low-level.

- [IP Restriction](/traffic-policy/actions/restrict-ips/)
- [Mutual TLS](/traffic-policy/actions/terminate-tls/)

## Agent Forwarding

The [ngrok agent](/agent/) and [Agent
SDKs](/agent-sdks/) forward traffic that your endpoints receive
to upstream services. You specify a URL or port number to instruct the ngrok
agent where and how to forward traffic.

### Forward to non-local service

Agents don't just forward to ports on your localhost. You can forward traffic
to any address or URL reachable from the agent. For example, if you want to
forward traffic to a Postgres server running on your network at
`192.168.1.2:5432`:

<Tabs groupId="connectivity" queryString="cty">
	<TabItem value="agent-cli" label="Agent CLI" default>
		<NonLocalAgentCliExample />
	</TabItem>
	<TabItem value="agent-config" label="Agent Config">
		<NonLocalAgentConfigExample />
	</TabItem>
	<TabItem value="ssh" label="SSH">
		<NonLocalSshExample />
	</TabItem>
	<TabItem value="go-sdk" label="Go">
		<NonLocalGoSdkExample />
	</TabItem>
	<TabItem value="javascript-sdk" label="Javascript">
		<NonLocalJavascriptSdkExample />
	</TabItem>
	<TabItem value="python-sdk" label="Python">
		<NonLocalPythonSdkExample />
	</TabItem>
	<TabItem value="rust-sdk" label="Rust">
		<NonLocalRustSdkExample />
	</TabItem>
	<TabItem value="k8s" label="Kubernetes Controller">
		<NonLocalKubernetesExample />
	</TabItem>
</Tabs>

### PROXY Protocol

When you forward traffic to an upstream TCP service, becuase traffic is coming
from the ngrok agent, it won't know the client's original IP address. You can
add the [PROXY
protocol](https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt) header
on connections to your upstream service to send connection information like the
original client IP address to your upstream service. You will need to configure
your upstream service to handle the PROXY protocol header.

<Tabs groupId="connectivity" queryString="cty">
	<TabItem value="agent-cli" label="Agent CLI" default>
		<ProxyProtoAgentCliExample />
	</TabItem>
	<TabItem value="agent-config" label="Agent Config">
		<ProxyProtoAgentConfigExample />
	</TabItem>
	<TabItem value="ssh" label="SSH">
		<ProxyProtoSshExample />
	</TabItem>
	<TabItem value="go-sdk" label="Go">
		<ProxyProtoGoSdkExample />
	</TabItem>
	<TabItem value="javascript-sdk" label="Javascript">
		<ProxyProtoJavascriptSdkExample />
	</TabItem>
	<TabItem value="python-sdk" label="Python">
		<ProxyProtoPythonSdkExample />
	</TabItem>
	<TabItem value="rust-sdk" label="Rust">
		<ProxyProtoRustSdkExample />
	</TabItem>
	<TabItem value="k8s" label="Kubernetes Controller">
		<ProxyProtoKubernetesExample />
	</TabItem>
</Tabs>

## Observability

### Traffic Inspector

[Traffic Inspector](/obs/traffic-inspection) does not support TCP endpoints.

### Log Export Events

You can export logs of traffic to TCP endpoints with [ngrok's events
system](/obs/events/). The following events are published for log exporting:

| Event                                                                    | When                                                         |
| ------------------------------------------------------------------------ | ------------------------------------------------------------ |
| [tcp_connection_closed.v0](/obs/events/reference/#tcp-connection-closed) | Published when a TCP connection to a TCP endpoint completes. |

## Limits & Timeouts

[Contact us](mailto:support@ngrok.com) if you need to configure limits and timeouts on
connections to TCP endpoints.

| Limit     | Name                | Notes                                                        |
| --------- | ------------------- | ------------------------------------------------------------ |
| 5 minutes | Client Idle Timeout | Time since data was last transmitted by the upstream service |
| 5 minutes | Server Idle Timeout | Time since data was last transmitted by the upstream service |
| No limit  | Data transmitted    | Data transmitted by the client or upstream service           |

## Errors

If an error is encountered while handling connections to a TCP endpoint for any
reason (e.g. traffic policy action error, internal server error), the
connection will be closed. Because of the low-level nature of the TCP protocol,
there is no mechanism used to transmit information about what error code was
encountered.

Use the [observability](#observability) features to understand connection
handling errors.

## API

TCP Endpoints can be created programatically. Consult the documentation on
[Endpoint APIs](/universal-gateway/endpoints/#api).

## Pricing

TCP endpoints are available on all plans. Consult the [Endpoints
Pricing](/universal-gateway/endpoints/#pricing) documentation for
billing details.

TCP endpoints are only available on a free plan after [adding a valid payment
method](https://dashboard.ngrok.com/settings#id-verification) to your account.

See [TCP Addresses pricing](/universal-gateway/tcp-addresses/#pricing) for
details on pricing for fixed TCP Addresses.
