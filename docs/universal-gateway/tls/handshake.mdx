---
title: How Does the TLS Handshake Work?
description: Learn how the TLS handshake works with ngrok.
---

ngrok uses TLS `1.3` (the latest version) by default. If a client does not
support TLS `1.3`, ngrok will use the highest possible version that the client
supports, down to TLS `1.1`.

You may customize the minimum and maximum supported versions of TLS with the
[`terminate-tls`](/traffic-policy/actions/terminate-tls) traffic policy action.

### ALPN

`https` endpoints negotiate the next protocol via ALPN with the following
default list in order of preference:

```
['h2', 'http/1.1']
```

### SNI

ngrok endpoints do not support legacy clients which do not set the SNI
extension. For example, the following clients (and others) will fail to work
with ngrok endpoints:

- Microsoft Internet Explorer 6.0
- Microsoft Internet Explorer 7 & 8 on Windows XP or earlier
- Native browser on Android 2.X
- Java &lt;=1.6
- [Python 2.X, 3.0, 3.1 if required modules are not installed](https://stackoverflow.com/questions/18578439/using-requests-with-tls-doesnt-give-sni-support/18579484#18579484)

### Encrypted Client Hello

ngrok endpoints do not yet support the draft implementation of [Encrypted
Client Hello](https://datatracker.ietf.org/doc/draft-ietf-tls-esni/).
