#!/bin/bash

# Check if definition-wrapper.js is staged for commit
if git diff --cached --name-only | grep -q "definition-wrapper.js"; then
  echo "ğŸ“š definition-wrapper.js changed, regenerating glossary.mdx..."
  
  # Run the glossary generation script
  node custom/scripts/glossary/generate-glossary.js
  
  # Check if the script ran successfully
  if [ $? -eq 0 ]; then
    # Add the generated glossary.mdx to the commit
    git add glossary.mdx
    echo "âœ… glossary.mdx regenerated and added to commit"
  else
    echo "âŒ Failed to generate glossary.mdx"
    exit 1
  fi
fi

exit 0
