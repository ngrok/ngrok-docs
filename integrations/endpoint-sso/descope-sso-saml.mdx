---
title: Secure your endpoints with Descope SSO (SAML)
sidebarTitle: Descope (SAML)
description: Secure access to your ngrok endpoints with Descope single sign-on (SSO) using SAML.
---

import Disclaimer from "/snippets/integrations/_endpoint-sso-disclaimer.mdx";

<Disclaimer />

<Tip>
**TL;DR**

To secure access to ngrok with Descope single sign-on (SSO) using SAML:

1. [Configure Descope SSO](#1-fetch-idp-metadata)
2. [Configure ngrok](#2-configure-ngrok)
3. [Test access to ngrok with Descope SSO](#test-the-integration)
</Tip>

This guide walks you through configuring Descope as the primary Identity Provider for ngrok endpoints using single sign-on (SSO).
By integrating Descope SSO with ngrok, you can:

- Restrict access to ngrok endpoints only to users authenticated via Descope
- Use Descope security policies and MFA authenticators
- Use the Descope Console to facilitate access to ngrok apps

The ngrok integration with Descope supports SP-Initiated SSO.
In this mode, users access ngrok edges and tunnels and are redirected to Descope for authentication.

## What you'll need

- A Descope project with administrative rights and an Enterprise license to be able to create SAML applications.
- An ngrok Enterprise account with an authtoken or admin access to configure edges with SAML.

## 1. Fetch IdP Metadata 

### Add the ngrok app in Descope

1. Open the Descope Console.
2. On the left menu, click **Applications**, and then click **+ Application** in the top right corner.
3. In the popup window, enter `ngrok` in the **Name** field, make sure that `SAML` is selected under **Authentication protocol**, and then click **Create**.
4. On the **ngrok** application page, click the download button next to **Descope Metadata (XML)** to download the Metadata file that you'll need later on.
Make sure to leave this page open.
5. **Optional**: If you wish to change the Auth Hosting URL to use a different flow for ngrok SSO, you can change that on this page, and click **Save**.

## 2. Configure ngrok 

To configure an edge with Descope:

1. Access the [ngrok Dashboard](https://dashboard.ngrok.com/) and sign in using your ngrok account.
2. On the left menu, click **Universal Gateway** and then click **Edges**.
3. If you don't have an edge already set to add Descope SSO, create a test edge:
   - Click **+ New Edge**.
   - Click **Create HTTPS Edge**.
   - Click the **pencil icon** next to "no description", enter `Descope SSO SAML` as the edge name, and click **Save**.
4. On the edge settings menu, click **SAML**.
5. On the **SAML** page, click **Begin setup**, click **Upload XML**, and then open the XML metadata file you downloaded from Descope (See [Fetch IdP Metadata](#1-fetch-idp-metadata)).
6. **Optional**: If you wish to enable IdP-initiated SSO, so that you can sign in directly from the Descope IdP-initiated SSO URL instead of from ngrok, you can check this box.
7. Click **Save** at the top.
8. Copy both the **Entity ID** and the **ACS URL** values for later use.

## 3. Configure Descope 

1. Back in the Descope Console, under your **ngrok** application, select **Enter the connection details manually** under **Service Provider (SP)**.
2. Enter the following values in the input fields and save the configuration.

   Replace the following with the values copied on previous steps:
   - `NGROK_ACS_URL`: The value of the ngrok **Entity ID** copied from the edge SAML configuration.
   - `NGROK_ENTITY_ID_URL`: The value of the ngrok **ACS URL** copied from the edge SAML configuration.

## 4. Start a tunnel 

1. Access the [ngrok edges page](https://dashboard.ngrok.com/edges), click your edge, and then click **Start a tunnel**.

   <Tip>
   This step assumes you have an app running locally (for example, on `localhost:3000`) with the ngrok client installed.
   </Tip>

2. Click the **copy icon** next to the tunnel command.
3. Launch a tunnel:
   - Launch a terminal.
   - Paste the command but replace `http://localhost:80` with your localhost app address (such as `http://localhost:3000`).
   - Press **Enter** and an ngrok tunnel associated with your edge configuration will launch.
4. To confirm that the tunnel is connected to your edge:
   - Return to the ngrok dashboard.
   - Close the **Start a tunnel** and the **Tunnel group** tabs.
   - Refresh the test edge page.
   Under traffic, you will see the message _You have 1 tunnel online. Start additional tunnels to begin load balancing_.
5. In the test edge, copy the **endpoint URL**.
You use this URL to test the Descope authentication.

## Test the integration

1. In your browser, launch an incognito window.
2. Access your ngrok endpoint (for example, `https://descope-sso-test.ngrok.app` or use the copied URL).
3. You should be prompted to log in with Descope.
4. After logging in, you should be able to see your web app.
