---
title: Stripe Webhooks
sidebarTitle: Stripe
description: Develop and test Stripe webhooks from localhost.
---

import InspectingRequests from "/snippets/integrations/_inspecting-requests.mdx";
import ReplayingRequests from "/snippets/integrations/_replaying-requests.mdx";

This guide shows you how to use ngrok to receive Stripe webhooks on your localhost app.
Stripe requires your application to be available at an HTTPS endpoint.

By integrating ngrok with Stripe, you can:

- Develop and test Stripe webhooks locally without deploying to a public environment or setting up HTTPS.
- Inspect and troubleshoot requests from Stripe in real time via the inspection UI and API.
- Modify and replay Stripe webhook requests with a single click instead of reproducing events manually in your Stripe account.
- Secure your app with Stripe webhook validation provided by ngrok.
  Invalid requests are blocked by ngrok before reaching your app.

## What you'll need

- An [ngrok account](https://ngrok.com/signup) and your [authtoken](https://dashboard.ngrok.com/get-started/your-authtoken).
- The [ngrok agent](https://ngrok.com/download) installed.
- [Node.js](https://nodejs.org/) installed (for the sample app, or use your own app).
- A Stripe account.

## 1. Start your app

For this tutorial, you can use the [sample Node.js app on GitHub](https://github.com/ngrok/ngrok-webhook-nodejs-sample).

To install the sample, run the following in a terminal:

```bash
git clone https://github.com/ngrok/ngrok-webhook-nodejs-sample.git
cd ngrok-webhook-nodejs-sample
npm install
```

Then start the app:

```bash
npm start
```

The app runs on port 3000 by default.

You can confirm it's running by visiting `http://localhost:3000`.
The app logs request headers and body in the terminal and shows a message in the browser.

## 2. Expose your app with ngrok

Once your app is running locally, you're ready to put it online securely using ngrok.

- Copy [your ngrok authtoken](https://dashboard.ngrok.com/get-started/your-authtoken) from the dashboard.

<Tip>
  The ngrok agent uses your authtoken to authenticate when you start a tunnel.
</Tip>

- Start ngrok:

  ```bash
  ngrok http 3000
  ```

- Copy the URL ngrok displays.
  Your app is now exposed at that URL for use with Stripe.

## 3. Configure Stripe to send webhooks

Stripe can send webhook requests to your app when events occur in your account.
To register for those events:

- Sign in to the [Stripe dashboard](https://dashboard.stripe.com/).
- Click **Developers** and **Webhooks** in the left menu.
- On **Webhooks**, click **Add an endpoint**.
- On **Listen to Stripe events**, enter your ngrok URL in **Endpoint URL** (for example, `https://1a2b-3c4d-5e6f-7g8h-9i0j.ngrok.app`).
- Click **+ Select events**, choose the events you want (for this tutorial, expand **Product** and click **Select all Product events**), then click **Add events** and **Add endpoint**.

<Tip>
  Stripe may show sample code for running an app; for this tutorial use the sample app from [Start your app](#1-start-your-app) instead.
</Tip>

The **Webhooks** page shows your new endpoint.

### Run webhooks with Stripe and ngrok

Create a product so Stripe notifies your app:

- In the Stripe dashboard, click **Product** and **Add product**.
- Enter a **Name** and **Price**, then click **Save product**.

Confirm your localhost app receives the product creation notification.
You can review sent messages under **Developers**, **Webhooks**, and your webhook.

<Tip>
  Stripe sends different request body contents and headers depending on the event.
</Tip>

<InspectingRequests />

<ReplayingRequests />

## Secure webhook requests

ngrok can verify that incoming requests are from your Stripe webhook so only that traffic reaches your app.

<Note>
  Webhook verification is limited to 500 validations per month on free accounts.
  If you need more, you can upgrade to Hobbyist or Pay-as-you-go.
  See [TPU Pricing](/pricing-limits/traffic-policy-unit-pricing/) for details.
</Note>

To add verification:

- On the webhook page for your endpoint, click **Reveal** under **Signing secret** and copy the value.
- Create a Traffic Policy file named `stripe_policy.yml`.
  Replace `{your signing secret}` with the value you copied:

  ```yaml
  on_http_request:
    - actions:
        - type: verify-webhook
          config:
            provider: stripe
            secret: "{your signing secret}"
  ```

- Restart ngrok with the policy file:

  ```bash
  ngrok http 3000 --traffic-policy-file stripe_policy.yml
  ```

- Create a new product in the Stripe dashboard to trigger the webhook.

Your app should receive the request and log it in the terminal.
