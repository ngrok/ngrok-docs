---
title: Agent Endpoints with Traffic Policy Quickstart
sidebarTitle: Agent Endpoints Quickstart
description: Learn how to set up an Agent Endpoint with a custom Traffic Policy using the ngrok agent CLI.
---

## What you'll need

- An [ngrok account](https://dashboard.ngrok.com/).
- The [ngrok Agent CLI](https://ngrok.com/download) installed.

## 1. Create a Traffic Policy

Create a custom Traffic Policy file with the following contents:

```yaml
on_http_request:
  - actions:
      - type: custom-response
        config:
          status_code: 200
          body: "Hello, World!"
```

This policy will respond to each HTTP request with a simple “Hello, World!” message.

## 2. Apply your Traffic Policy

Run the agent, applying the Traffic Policy you saved in the previous step with the `--traffic-policy-file` flag:

```
$ ngrok http 80 --traffic-policy-file policy.yml
```

This command starts an HTTP tunnel for port `80`, using the specified `policy.yml` Traffic Policy to manage traffic.

## 3. Test it out

After running the ngrok command in the previous step you should now see a URL in the forwarding section. Open the URL
in your web browser. You should see the "Hello, World!" message displayed in your browser.

## What's next?

You've now successfully set up your first Agent Endpoint with a custom Traffic Policy using the ngrok agent.

To learn more about ngrok's Traffic Policy and its capabilities, check out the following resources:

- Learn about the [core concepts](/traffic-policy/how-it-works) like phases and rules.
- Check out the [examples, use-cases and guides](/traffic-policy/examples/a-b-tests/).
- The list of [available actions](/traffic-policy/actions/), [macros](/traffic-policy/macros/) and [variables](/traffic-policy/variables/) you can use.
