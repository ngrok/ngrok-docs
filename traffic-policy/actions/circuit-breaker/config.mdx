import { Config, ConfigItem } from "/src/components/ConfigTable.tsx";

## Configuration Reference

The [Traffic Policy](/traffic-policy/) configuration
reference for this action.

### Supported Phases

`on_http_request`

### Type

`circuit-breaker`

### Configuration Fields

<Config>
	<ConfigItem title="error_threshold" type="float" required={true}>
		<p>
			Threshold percentage of errors that must be met before requests are
			rejected. Must be a value between `0.0` and `1.0`. Defaults to `0.5`.
		</p>
	</ConfigItem>
	<ConfigItem title="volume_threshold" type="integer">
		<p>
			Number of requests in a rolling window before checking the error
			threshold. Must be a number between `1` and `2,000,000,000`. Defaults to
			`10`.
		</p>
	</ConfigItem>
	<ConfigItem title="window_duration" type="duration">
		<p>
			Number of seconds in the rolling window that metrics are retained for.
			Must be a value between `1s` and `2m`. Defaults to `10s`.
		</p>
	</ConfigItem>
	<ConfigItem title="tripped_duration" type="duration">
		<p>
			Number of seconds the system waits after rejecting a request before
			re-evaluating upstream health. Must be a value between `1s` and `2m`.
			Defaults to `10s`.
		</p>
	</ConfigItem>
	<ConfigItem title="num_buckets" type="integer">
		<p>
			Number of buckets that metrics are divided into within the rolling window.
			Fixed at `10`.
		</p>
	</ConfigItem>
	<ConfigItem title="enforce" type="boolean">
		<p>
			Determines if the circuit breaker is active. If `false`, the circuit
			breaker never trips, and no requests are rejected. Defaults to `true`.
		</p>
	</ConfigItem>
</Config>
