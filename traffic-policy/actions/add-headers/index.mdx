---
title: Add Headers Action
sidebarTitle: Overview
description: Add headers to an HTTP request or response before it is delivered upstream or back to the client.
---

The Add Headers action enables you to add custom headers to an HTTP request or 
response before delivery to the upstream service or client. This is useful 
for attaching metadata like request identifiers, applying security controls, or 
adjusting how applications process traffic.

## Example

The following [Traffic Policy](/traffic-policy/)
configuration will add the client IP address to all HTTP requests.

<Tip>
	See [the Add Headers examples page](/traffic-policy/actions/add-headers/examples) for more ways to use this Traffic Policy action.
</Tip>

### Example Traffic Policy Document

<CodeGroup>
```yaml policy.yml
on_http_request:
  - actions:
    - type: "add-headers"
      config:
        headers:
          x-client-ip: "${conn.client_ip}"
```
```json policy.json
{
  "on_http_request": [
    {
      "actions": [
        {
          "type": "add-headers",
          "config": {
            "headers": {
              "x-client-ip": "${conn.client_ip}"
            }
          }
        }
      ]
    }
  ]
}
```
</CodeGroup>

For this example, we are assuming that ngrok is pointing at the upstream service
https://httpbin.org and we are adding the following header to all requests:

- `x-client-ip` with the value `${conn.client_ip}` to demonstrate the use of
  CEL interpolation to include the client IP address.

### Example Request

```bash
$ curl -i https://httpbin.ngrok.app/get
```

```http
HTTP/2 200 OK
content-type: application/json

{
  "headers": {
    "X-Client-Ip": "2600:1700:4fa6:1a00:2051:938:7373:5563",
  }
}
```

