import { Config, ConfigItem } from "/src/components/ConfigTable.tsx";

## Configuration Reference

This is the [Traffic Policy](/docs/traffic-policy/) configuration
reference for this action.

### Supported Phases

`on_http_request`

### Type

`basic-auth`

### Configuration Fields

<Config>
    <ConfigItem title="credentials" type="array of strings" required={true} cel={true}>
        <p>A list of up to 10 allowed <code>username:password</code> credential pairs.</p>
        <p>Password must be at least <code>8</code> characters and no more than <code>128</code> characters.</p>
        <p>
			Supports [CEL Interpolation](/traffic-policy/concepts/cel-interpolation) in header values.
		</p>

        :::warning
            Credentials use a `username:password` format where username, password, or the entire credential can be CEL expressions.
            CEL expressions cannot embed the `:` delimiter within username or password components.
            <br />
            **Valid patterns:**

            - `${CEL_EXPRESSION}:password` - CEL username, literal password (or vice versa)
            - `${CEL_EXPRESSION}:${CEL_EXPRESSION}` - both username and password as separate CEL expressions
            - `${CEL_EXPRESSION}` - entire credential as single CEL expression
            - `user-prefix${CEL_EXPRESSION}:password` - partial CEL substitution within username (or password)
            <br />
            **Invalid patterns:**

            - `${CEL_EXPRESSION}password` - CEL expression without proper boundaries
            - `user-prefix${CEL_EXPRESSION}password-suffix` - CEL expression spanning username and password components
        :::

    </ConfigItem>

    <ConfigItem title="realm" type="string" required={false}>
        <p>The HTTP realm of the request as per <a href="https://datatracker.ietf.org/doc/html/rfc7235">RFC 7235</a>.</p>
        <p>Default is <code>ngrok</code>.</p>
    </ConfigItem>

    <ConfigItem title="enforce" type="bool" required={false}>
        <p>Default <code>true</code>. If <code>false</code>, continue to the next action even if basic authentication failed. This is useful for handling fall-through, debugging, and testing purposes.</p>
    </ConfigItem>

</Config>
